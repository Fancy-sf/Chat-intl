
従来の販売方法はコストが高く、その効果を評価することは困難でした。ライブコマースが主要な事業者のマーケティング活動の数々の障壁を打破したこと、検索チャンネル、配信チャンネル、サブスクリプションチャンネル、レビューチャンネル、運営チャンネルなどを統合したこと、統合後にチャンネルリダイレクトによるユーザーの流失を効果的に回避したことは疑いようのない事実です。以上より、ライブコマースは、インターネット時代の統合マーケティングになくてはならない選択肢となっています。
データによれば、2019年の中国オンラインライブストリーミングユーザーは5.04億人で、2020年には5.26億人になることが見込まれ、販売規模の9160億元は、中国のオンライン小売規模の8.7%を占めるといわれています。市場が非常に大きく、ライブコマースが極めて優れた効果を誇る現在、主要なライブストリーミングプラットフォームでライブストリーミングを行う以外に、独自のライブコマースプラットフォームをどのように構築すればよいのでしょうか？
## バックグラウンド


インタラクティブなシナリオで次の機能を実現する必要があります。
- チャットルーム機能
- 公示機能
- ユーザーのグループチャットへの参加、グループからの退出のプロンプト
- バックエンドでの新商品公開のプロンプト
- ギフトのプロンプト
- バックエンドでの新ギフト公開のプロンプト
- いいね！&いいね！のプロンプト
- ライブストリーミング機能
- ライブストリーミングルーム状態制御機能

これらのことから、ライブコマースのコア機能はIM機能とライブストリーミング機能に分かれていることがわかります。 [IM](https://intl.cloud.tencent.com/document/product/1047) と [LVB](https://intl.cloud.tencent.com/document/product/1047) をニーズ実現の基礎として選択することができます。

## Demo体験
![](https://main.qcloudimg.com/raw/3158cc06a9e6fafa48554bbe1918fa8e.jpg)

## シナリオベースSDK

ライブコマースのシナリオでは、カスタムメッセージを介して、いいね！、ギフト、フォローのリマインドを実現でき、またグループカスタムフィールドを介して商品公開通知、グループの状態変更通知を実現できます。これをもとに、弊社はライブコマースシナリオの関連機能を手軽に実現できるよう、[シナリオベースSDK](https://www.npmjs.com/package/im-live-sells)をカプセル化しました。詳細な使用ガイドについては、 [ミニプログラムライブストリーミングSDK API](https://intl.cloud.tencent.com/document/product/1047/36211)をご参照ください。

また次の手順で自身のライブコマースプラットフォームを構築することもできます。

## 操作手順
### 手順1： IMのAVChatroomを使用し、ライブストリーミングチャットルームを実現

チャットルームライブストリーミングの非常に重要な一部であり、ユーザーはここで自分の話したいことを送信し、同じチャットルーム内の他のメンバーからのメッセージを受信できます。

1.  [IMコンソール](https://console.cloud.tencent.com/im)にログインし、**+新しいアプリケーションの追加**をクリックします。
2. **アプリケーションの作成**ダイアログボックスにアプリケーション名を入力し、**OK**をクリックします。
    作成が完了すると、コンソールの概要ページで、作成したアプリケーションのステータス、サービスバージョン、SDKAppID、作成時間、有効期限を確認できます。
  >?作成したアプリケーションのバージョンのデフォルトは体験版です。引き続き、ニーズに基づき、プロフェッショナル版またはフラッグシップ版に[アップグレード](https://intl.cloud.tencent.com/document/product/1047/34577)できます。
  >同じTencent Cloudのアカウントで、最大300個のIMアプリケーションを作成することができます。すでにアプリケーションが300個ある場合は、使用する必要のないアプリケーションを[使用停止して削除](https://intl.cloud.tencent.com/document/product/1047/34540)すると、新しいアプリケーションを作成することができます。**アプリケーションを削除した後、そのSDKAppIDに対応するすべてのデータとサービスは失われます。慎重に操作を行ってください。**


3. 対象のアプリケーションカードをクリックし、左側のナビゲーションバーで**グループ管理**を選択します。
4. **グループ管理**ページで、**グループの追加**をクリックします。
5. ポップアップしたグループの追加ダイアログボックスで、次のパラメータを設定します。
 - グループ名：グループ名を入力してください。パラメータは入力必須で、長さは30バイト以下。
 - グループマスターID：グループマスターのIDを入力してください。パラメータはオプションです。登録済みのユーザー名を入力する必要があります。
 - グループタイプ：グループタイプを設定してください。 [グループタイプの説明](https://intl.cloud.tencent.com/document/product/1047/33529)に基づき、**	
ライブストリーミンググループ (AVChatRoom)**と設定することをお勧めします。
3. **OK**をクリックし、設定を保存します。
 グループの作成が完了すると、グループリストにグループID、グループ名、グループマスター、タイプと作成時間を表示できます。


### 手順2：カスタムメッセージを使用し、いいね！、ギフト、購入などのメッセージ通知を実現

ライブストリーミングのシナリオでは、グループによる活発な熱度の効果を実現するため、大量のメッセージをリアルタイムでグループメンバーにフィードバックします。例えば、誰かがキャスターにギフトを贈った場合は、全員に通知する必要があり、特別にクールなアニメーションを使用する必要がある場合もあります。全員に通知するギフトメッセージは、IMのカスタムメッセージを使用して実現することができ、またカスタムメッセージには追加情報を含めることがでます。ユーザーがギフトメッセージを送信する場合には、ギフト情報およびユーザー情報を添付できます。同様に、ユーザーのいいね！、商品購入、キャスターをフォローするといった行為はいずれもカスタムメッセージで実現できます。カスタムメッセージは、テキストメッセージ、リッチテキストメッセージとはやや異なり、ユーザーが送信する特別なメッセージであり、特別なシグナルを送信するだけであると理解することができます。

SDKでカスタムメッセージを送信する場合のサンプルコードは次のとおりです。

```
public async sendCustomMsgAndEmitEvent(type: string, extension?: string) {
        const message = this.tim.createCustomMessage({
            to: this.roomID,
            conversationType: this.TIM.TYPES.CONV_GROUP,
            priority: this.TIM.TYPES.MSG_PRIORITY_HIGH,
            payload: {
                data: type,
                description: '',
                extension: extension
            }
        })
        await this.tim.sendMessage(message)
        const res = {
            nick: this.userInfo.nick,
            avatar: this.userInfo.avatar,
            value: extension,
            userID:this.userInfo.userID
        }
        this.eventBus.emit(type, res)
        return res
}
```

### 手順3：グループのカスタムフィールドを使用し、ライブストリーミングルームの新商品の公開、ライブストリーミング状態変更のメッセージ通知を実現

ライブコマースシナリオでは、キャスターがある製品を紹介するとき、画面下側の商品欄を即座に現在の製品に更新し、ライブストリーミングの全ユーザーに新しい商品がリリースされたことを通知する必要があります。新商品メッセージは、通常、アシスタントによってトリガーされます。
技術的な角度から、アシスタントが新商品メッセージをトリガーするには、2つの方法があります
- アシスタントがカスタムメッセージを送信
 - この方法は、アシスタントが現在のライブストリーミンググループへの参加を済ませている必要があります。
 - グループメッセージの数量が大量である場合、IMバックエンドはメッセージの優先度に従いメッセージを返すため、カスタムメッセージの優先度が低い場合は、ユーザー側に表示される商品が直ちに更新されない状況が発生することがあります。
- アシスタントがグループプロファイルを変更
 - この方法を採用する場合は、アシスタントが現在のライブストリーミンググループのグループメンバー（管理者ロール）であっても、グループメンバーでなくても、問題はありません。
 - デフォルトのグループプロファイルフィールドに定義されていても、IMはさらにグループレベルのカスタムフィールドを提供するため、指定フィールドの定義と読み取り/書き込み権限をカスタマイズできます。

以上より、**管理者によるグループカスタムフィールド変更の方法**を採用し、新商品メッセージ通知を実現することをお勧めします。具体的な操作手順は次のとおりです。

#### グループカスタムフィールドの追加

1.  [IMコンソール](https://console.cloud.tencent.com/im) にログインして、対象のアプリケーションカードをクリックし、左側のナビゲーションバーで**機能設定**>**グループカスタムフィールド**を選択します。
2. **グループカスタムフィールド**ページで**グループカスタムフィールドの追加**をクリックします。
3. ポップアップ表示されたグループカスタムフィールドのダイアログボックスに、フィールド名を入力し、グループタイプとそれに対応する読み取り・書き込み権限を設定します。
  >?
  >- フィールド名は、英数字およびアンダーバー(\_)のみで構成され、数字で始めることはできません。長さは16文字以下とします。
  >- グループカスタムフィールド名は、グループメンバーカスタムフィールド名と同じにすることはできません。
  >
3. **カスタムフィールドとグループタイプを追加した後は、タイプの読み取り・書き込み権限は変更できても、削除はできないことを了承します**にチェックを入れ、**OK**をクリックし、設定を保存します。
 グループカスタムフィールドは設定から約10分後に有効になります。

#### グループカスタムフィールドの使用

アシスタントはグループ管理者のロールで、適時、 [グループ基本プロファイルの変更REST API](https://intl.cloud.tencent.com/document/product/1047/34962)を呼び出し、対応するグループカスタムフィールドを更新し、ライブストリーミングルームの新商品公開通知とライブストリーミング状態の変更メッセージ通知を送信します。


### 手順4：グループメッセージ送信後のコールバックを使用してユーザーレベルの統計を実現

ライブストリーミングシナリオでは、ユーザーにはプロフィール画像、ニックネームなどの他に、通常、レベル情報があり、例えば、視聴者がメッセージ、ギフトを送信した後、ユーザーの成長レベルを上げる必要があります。コールバックを介して関連の機能を実現することができ、ビジネス側はユーザーのグループ、リレーションシップチェーン、シングルチャットメッセージ、オンラインステータスなどでステータスが変更された場合のコールバックを通じてメッセージを取得することができます。グループチャットでユーザーが一般的なテキストメッセージかギフトメッセージかに応じて、ユーザーのレベルを変更します。
コールバック関連操作については、 [コールバック設定](https://intl.cloud.tencent.com/document/product/1047/34520) と [サードパーティによるコールバックの概要](https://intl.cloud.tencent.com/document/product/1047/34354)をご参照ください。

### 手順5：セキュリティ対策によるセンシティブな用語のブロックの実現

セキュリティ対策機能は、ライブストリーミング、ソーシャルネットワーキング、コンサルティングなどの領域で常に不可欠です。ライブストリーミングのシナリオで、デリケートなコンテンツの拡散が疑われた場合の影響は非常に深刻です。IMは、センシティブな用語のフィルタリング機能を提供し、デフォルトで国の一部リーダー名に対するセンシティブな用語のフィルタリングをサポートしています。また[セキュリティ対策サービス](https://intl.cloud.tencent.com/document/product/1047/34350)を追加で購入することもできます。


### 手順6：LVBを使用してプッシュアドレスを生成し、ライブストリーミングを開始
Tencent Cloud LVBはeコマースプラットフォームの発展をサポートします。販売会社がより全面的に商品情報を発信し、ユーザーは十分な情報に基づいて意思決定できるようして、マーケティングコストを削減し、売上を伸ばします。
ライブブロードキャストを開始する前に、[アドレスジェネレーター(https://intl.cloud.tencent.com/document/product/267/31084)でプッシュアドレスを生成し、その後、 [LVBプッシュ](https://intl.cloud.tencent.com/document/product/267/31558)を実行する必要があります。

